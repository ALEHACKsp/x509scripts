#/bin/bash

export OPENSSL_CONF=/dev/null
CERT_DIR="${CERT_DIR:-certs}"

umask 077
mkdir -p "$CERT_DIR"

# Very slow to generate but fast to use.
[ -s "$CERT_DIR"/dhparam.pem ] ||
    openssl dhparam -out "$CERT_DIR"/dhparam.pem -2 2048

# Much faster to generate, however working performance is lower.
[ -s "$CERT_DIR"/dhparam.pem ] ||
    openssl dsaparam 2048 | openssl dhparam -dsaparam -out "$CERT_DIR"/dhparam.pem


# https://security.stackexchange.com/questions/54359/what-is-the-difference-between-diffie-hellman-generator-2-and-5
